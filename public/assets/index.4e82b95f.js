var te=Object.defineProperty;var V=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var q=(s,t,n)=>t in s?te(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,G=(s,t)=>{for(var n in t||(t={}))se.call(t,n)&&q(s,n,t[n]);if(V)for(var n of V(t))oe.call(t,n)&&q(s,n,t[n]);return s};import{s as re,a as ne,r as p,o as l,c as d,b as e,n as C,w as $,v as M,t as i,d as b,e as h,f,T,g,h as k,F as O,i as S,j as P,k as w,l as j,m as x,C as le,p as ae,D as ie,q as de,u as ce,x as ue,y as W,z as he,A as me,H as J,B as pe}from"./vendor.fa4ede22.js";const ge=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};ge();var _=(s,t)=>{const n=s.__vccOpts||s;for(const[a,r]of t)n[a]=r;return n};const _e=re(ne),fe={data(){return{value1:null,filterBy:{},modalGuests:!1,modalDate:!1,modalDestination:!1,modal4:!1,modal5:!1,searchIcon:_e,searchBarTaped:!0,modalOpen:!1,tapOut:!1}},created(){const s=this.$route.query;s.destination&&(this.filterBy.destination=s.destination),window.addEventListener("scroll",this.onScroll)},methods:{setSearchFiled(){const s=this.$route.query.destination;s?this.filterBy.destination=s:this.filterBy={}},closeAllModal(){this.tapOut=!1,this.modalGuests=!1,this.modalDestination=!1,this.modalDate=!1,this.modal4=!1,this.modal5=!1,this.modalOpen=!1},closeMdal(){this.closeAllModal()},onScroll(){this.closeAllModal()},add(s,t){if(s&&this.filterBy[t])this.filterBy[t]++;else if(s&&!this.filterBy[t])this.filterBy[t]=0,this.filterBy[t]++;else{if(this.filterBy[t]<=0)return;this.filterBy[t]--}},sendFilter(){this.modalGuests=!1,this.$router.push({path:"explore",query:{destination:this.filterBy.destination,adults:this.filterBy.adults,children:this.filterBy.children,infants:this.filterBy.infants,pets:this.filterBy.pets}}),this.closeAllModal()},clickedModal(s,t=null,n){if(s==="modalDate"){this.modalOpen=!0,t===4?this.modal4===!0?(this.modal4=!1,this.modalDate=!1,this.modalOpen=!1,this.tapOut=!1):(this.tapOut=!0,this.modal4=!0,this.modal5=!1,this.modalDate=!0,this.$refs.input.focus()):this.modal5===!0?(this.modal5=!1,this.modalDate=!1,this.modalOpen=!1,this.tapOut=!1):(this.$refs.input.focus(),this.modal5=!0,this.modal4=!1,this.modalDate=!0,this.tapOut=!0),this.modalGuests=!1,this.modalDestination=!1;return}else this.modal4=!1,this.modal5=!1;if(this[s]===!0){this[s]=!1,this.modalOpen=!1,this.tapOut=!1,this.tapOut=!1;return}this.modalGuests=!1,this.modalDate=!1,this.modalDestination=!1,this[s]=!0,this.modalOpen=!(this.modalGuests===!1&&this.modalDate===!1&&this.modalDestination===!1),this.modalDestination||this.modalGuests?this.tapOut=!0:this.tapOut=!1},onSelectDate(){this.$store.commit({type:"saveDate",selectedDate:this.value1}),console.log("this.value1",this.value1)},showDate(s){return this.value1?new Date(this.value1[s]).toDateString():"Add dates"}},computed:{children(){return this.filterBy.children}},watch:{"$route.params":{handler(){this.setSearchFiled()},deep:!0,immediate:!0}}},ve={class:"search-section"},ye={class:"search-bar"},we={class:"flex"},be=e("p",{class:"bold title-tag"},"Location",-1),ke=e("div",{class:"vert"},null,-1),$e=e("p",{class:"bold title-tag"},"Check in",-1),xe=e("div",{class:"vert"},null,-1),Oe=e("p",{class:"bold title-tag"},"Check out",-1),Se=e("div",{class:"vert"},null,-1),Ce=e("div",{class:"last-line"},[e("p",{class:"bold title-tag"},"Guests"),e("p",null,"Add guests")],-1),Be={class:"el-icon"},Te=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"16px",width:"16px",stroke:"currentcolor","stroke-width":"4",overflow:"visible"}},[e("g",{fill:"none"},[e("path",{d:"m13 24c6.0751322 0 11-4.9248678 11-11 0-6.07513225-4.9248678-11-11-11-6.07513225 0-11 4.92486775-11 11 0 6.0751322 4.92486775 11 11 11zm8-3 9 9"})])],-1),Me={key:0},De={key:0,class:"modal"},Re={class:"line flex"},Ie=e("div",{class:"txt"},[e("h3",{class:"title-tag"},"Adults"),e("p",{class:"content"},"Age 13 or above")],-1),Ue={class:"flex main-line"},Pe={class:"number"},Ae={class:"line flex"},Le=e("div",{class:"txt"},[e("h3",{class:"title-tag"},"Children"),e("p",{class:"content"},"Age 2-12")],-1),Fe={class:"flex main-line"},Ee={class:"number"},Ne={class:"line flex"},He=e("div",{class:"txt"},[e("h3",{class:"title-tag"},"Infants"),e("p",{class:"content"},"Under 2")],-1),Ge={class:"flex main-line"},ze={class:"number"},je={class:"line flex"},Ve=e("div",{class:"txt"},[e("h3",{class:"title-tag"},"Pets"),e("p",{class:"content under-line"},"Bringing a service animal?")],-1),qe={class:"flex main-line"},Je={class:"number"},Ke=e("p",{class:"bottomModal"}," If you're lucky enough to have more than 2 pets with you, be sure to let your host know. ",-1),We={key:0,class:"modal-2"},Ye=e("h1",null,null,-1),Qe=[Ye],Xe={key:0,class:"modal-3"},Ze=e("h1",null,null,-1),et=[Ze],tt={class:"demo-date-picker"},st={class:"block"};function ot(s,t,n,a,r,o){const c=p("el-date-picker");return l(),d("section",ve,[e("div",ye,[e("div",we,[e("div",{onClick:t[1]||(t[1]=u=>o.clickedModal("modalDestination")),class:C([r.modalDestination?"choose":"","filter-tag fd search-bar-right-btn"])},[be,$(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=u=>r.filterBy.destination=u),placeholder:"Where are you going?"},null,512),[[M,r.filterBy.destination]])],2),ke,e("div",{onClick:t[2]||(t[2]=u=>o.clickedModal("modalDate",4,0)),class:C([r.modal4?"choose":"","filter-tag first-date"])},[$e,e("p",null,i(o.showDate(0)),1)],2),xe,e("div",{onClick:t[3]||(t[3]=u=>o.clickedModal("modalDate",5,1)),class:C([r.modal5?"choose":"","filter-tag first-date"])},[Oe,e("p",null,i(o.showDate(1)),1)],2),Se,e("div",{onClick:t[5]||(t[5]=u=>o.clickedModal("modalGuests")),class:C([r.modalGuests?"choose":"","filter-tag 4 ld"])},[Ce,e("button",{onClick:t[4]||(t[4]=b((...u)=>o.sendFilter&&o.sendFilter(...u),["stop"])),class:C([[r.modalOpen?"small-padding":"large-padding"],"search-bar-btn demo-tracking"])},[e("i",Be,[Te,r.modalOpen?(l(),d("span",Me,"search")):h("",!0)])],2)],2)])]),(l(),f(T,{to:"#models"},[r.modalGuests?(l(),d("div",De,[e("div",Re,[Ie,e("div",Ue,[e("div",{onClick:t[6]||(t[6]=u=>o.add(0,"adults")),class:"div-btn"},"-"),e("p",Pe,i(r.filterBy.adults||0),1),e("div",{onClick:t[7]||(t[7]=u=>o.add(1,"adults")),class:"div-btn"},"+")])]),e("div",Ae,[Le,e("div",Fe,[e("div",{onClick:t[8]||(t[8]=u=>o.add(0,"children")),class:"div-btn"},"-"),e("p",Ee,i(o.children||0),1),e("div",{onClick:t[9]||(t[9]=u=>o.add(1,"children")),class:"div-btn"},"+")])]),e("div",Ne,[He,e("div",Ge,[e("div",{onClick:t[10]||(t[10]=u=>o.add(0,"infants")),class:"div-btn"},"-"),e("p",ze,i(r.filterBy.infants||0),1),e("div",{onClick:t[11]||(t[11]=u=>o.add(1,"infants")),class:"div-btn"},"+")])]),e("div",je,[Ve,e("div",qe,[e("div",{onClick:t[12]||(t[12]=u=>o.add(0,"pets")),class:"div-btn"},"-"),e("p",Je,i(r.filterBy.pets||0),1),e("div",{onClick:t[13]||(t[13]=u=>o.add(1,"pets")),class:"div-btn"},"+")])]),Ke])):h("",!0)])),(l(),f(T,{to:"#models"},[r.modalDate?(l(),d("div",We,Qe)):h("",!0)])),(l(),f(T,{to:"#models"},[r.modalDestination?(l(),d("div",Xe,et)):h("",!0)])),e("div",tt,[e("div",st,[g(c,{ref:"input",modelValue:r.value1,"onUpdate:modelValue":t[14]||(t[14]=u=>r.value1=u),type:"daterange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date",onInput:o.onSelectDate},null,8,["modelValue","onInput"])])]),r.tapOut?(l(),d("div",{key:0,onClick:t[15]||(t[15]=(...u)=>o.closeMdal&&o.closeMdal(...u)),class:"tap-close-modal"})):h("",!0)])}var rt=_(fe,[["render",ot]]);const nt={name:"room-filter",created(){this.filterBy.roomType=this.$store.getters.filterByRoomType,this.filterBy.price=this.$store.getters.filterByPrice,window.addEventListener("scroll",this.scroll),console.log("this.filterBy.amenities",this.filterBy.amenities)},data(){return{priceIsTapped:!1,typeIsTapet:!1,tapOut:!1,modalType:!1,modalPrice:!1,value:null,filterBy:{amenities:[]}}},methods:{clearAll(){this.priceIsTapped=!1,this.typeIsTapet=!1,this.tapOut=!1,this.modalType=!1,this.modalPrice=!1,this.value=null,this.filterBy.amenities=[],this.clear(0),this.clear(1),this.sendFilterBy()},clear(s){s?(this.filterBy.price.from=null,this.filterBy.price.to=null,this.priceIsTapped=!1):(this.filterBy.roomType.privateRoom=!1,this.filterBy.roomType.entirePlace=!1,this.filterBy.roomType.sharedRoom=!1,this.filterBy.roomType.hotal=!1,this.typeIsTapet=!1)},chackInclud(s){if(this.filterBy.amenities.includes(s))return{boxShadow:"inset 0px 0px 0px 1px #000000",backgroundColor:"#f7f7f7"}},closeMdal(){this.tapOut=!1,this.modalType=!1,this.modalPrice=!1},scroll(){this.modalType=!1,this.modalPrice=!1},toggleModalType(){this.modalType=!this.modalType,this.tapOut=!this.tapOut},toggleModalPrice(){this.modalPrice=!this.modalPrice,this.tapOut=!this.tapOut},async sendFilterBy(){this.modalType=!1,this.modalPrice=!1,console.log("filterBy",this.filterBy),this.$store.commit({type:"setFilterByRoomType",filterBy:JSON.parse(JSON.stringify(this.filterBy))}),this.filterBy.roomType.entirePlace||this.filterBy.roomType.privateRoom?this.typeIsTapet=!0:this.typeIsTapet=!1,this.filterBy.price.to&&this.filterBy.price.from&&(this.priceIsTapped=!0);try{await this.$store.dispatch({type:"loadRooms"}),this.setRouterParams()}catch(s){throw console.log("Cannot loadRooms",s),s}},onAmenities(s){if(this.filterBy.amenities.includes(s)){const t=this.filterBy.amenities.indexOf(s);this.filterBy.amenities.splice(t,1)}else this.filterBy.amenities.push(s);this.$store.commit({type:"setAmenities",amenities:[...this.filterBy.amenities]}),this.setRouterParams()},setRouterParams(){const{price:s}=this.filterBy,{from:t,to:n}=s,a=[],r=this.$store.getters.filterBy,{roomType:o,amenities:c}=r,{entirePlace:u,privateRoom:m}=o;u&&a.push("Entire place"),m&&a.push("Private room"),this.$router.push({path:"explore",query:{destination:r.destination,adults:r.adults,children:r.children,infants:r.infants,pets:r.pets,roomType:a,pricefrom:t,priceTo:n,amenities:c}})},onChangePrice(s){const{from:t,to:n}=s;this.filterBy.price={from:t,to:n}}},computed:{typeIsTapets(){if(this.typeIsTapet)return{boxShadow:"inset 0px 0px 0px 1px #000000",backgroundColor:"#f7f7f7"}},priceIsTappeds(){if(this.priceIsTapped)return{boxShadow:"inset 0px 0px 0px 1px #000000",backgroundColor:"#f7f7f7"}},pricesForDisplay(){return this.$store.getters.roomsPrices},amenitiesForShow(){return["Wifi","Kitchen","Air conditioning","Free canellation","Gym","Dryer","Pool","Elevator","TV","Essentials"]}}},lt={class:"room-filter"},at=e("p",null,"Price",-1),it=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor","stroke-width":"5.33333",overflow:"visible"}},[e("g",{fill:"none"},[e("path",{d:"m28 12-11.2928932 11.2928932c-.3905243.3905243-1.0236893.3905243-1.4142136 0l-11.2928932-11.2928932"})])],-1),dt=[at,it],ct=e("p",null,"Type Of Place",-1),ut=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor","stroke-width":"5.33333",overflow:"visible"}},[e("g",{fill:"none"},[e("path",{d:"m28 12-11.2928932 11.2928932c-.3905243.3905243-1.0236893.3905243-1.4142136 0l-11.2928932-11.2928932"})])],-1),ht=[ct,ut],mt=["onClick"],pt={key:0,class:"modals modal-type"},gt={class:"options"},_t={class:"filter-option"},ft=e("label",{for:"Entire"},[e("p",{class:"title-option"},"Entire place"),e("p",{class:"desc-option"},"Have a place to yourself")],-1),vt={class:"filter-option"},yt=e("label",{for:"Private"},[e("p",{class:"title-option"},"Private room"),e("p",{class:"desc-option"}," Have your own room and share some common spaces ")],-1),wt={class:"filter-option"},bt=e("label",{for:"Hotel"},[e("p",{class:"title-option"},"Hotel room"),e("p",{class:"desc-option"}," Have a private or shared room in a boutique hotel, hostel, and more ")],-1),kt={class:"filter-option"},$t=e("label",{for:"Shared"},[e("p",{class:"title-option"},"Shared room"),e("p",{class:"desc-option"}," Stay in a shared space, like a common room ")],-1),xt={class:"btns-area"},Ot={key:1,class:"modals modal-price",id:"app"},St={class:"options"},Ct={class:"btns-area"};function Bt(s,t,n,a,r,o){const c=p("HistogramSlider");return l(),d("section",lt,[e("button",{class:"filter-btn",onClick:t[0]||(t[0]=(...u)=>o.toggleModalPrice&&o.toggleModalPrice(...u)),style:k(o.priceIsTappeds)},dt,4),e("button",{onClick:t[1]||(t[1]=(...u)=>o.toggleModalType&&o.toggleModalType(...u)),class:"filter-btn",style:k(o.typeIsTapets)},ht,4),(l(!0),d(O,null,S(o.amenitiesForShow,(u,m)=>(l(),d("button",{key:m,onClick:v=>o.onAmenities(u,m),class:C("filter-btn btn-"+m),style:k(o.chackInclud(u))},[e("p",null,i(u),1)],14,mt))),128)),e("button",{class:"filter-btn",onClick:t[2]||(t[2]=(...u)=>o.clearAll&&o.clearAll(...u))},"Clear All"),r.modalType?(l(),d("div",pt,[e("section",gt,[e("div",_t,[$(e("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>r.filterBy.roomType.entirePlace=u),class:"checkbox",id:"Entire",type:"checkbox"},null,512),[[P,r.filterBy.roomType.entirePlace]]),ft]),e("div",vt,[$(e("input",{"onUpdate:modelValue":t[4]||(t[4]=u=>r.filterBy.roomType.privateRoom=u),id:"Private",type:"checkbox"},null,512),[[P,r.filterBy.roomType.privateRoom]]),yt]),e("div",wt,[$(e("input",{id:"Hotel",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=u=>r.filterBy.roomType.hotal=u)},null,512),[[P,r.filterBy.roomType.hotal]]),bt]),e("div",kt,[$(e("input",{"onUpdate:modelValue":t[6]||(t[6]=u=>r.filterBy.roomType.sharedRoom=u),id:"Shared",type:"checkbox"},null,512),[[P,r.filterBy.roomType.sharedRoom]]),$t])]),e("section",xt,[e("button",{class:"clear",onClick:t[7]||(t[7]=u=>o.clear(0))},"Clear"),e("button",{class:"save",onClick:t[8]||(t[8]=(...u)=>o.sendFilterBy&&o.sendFilterBy(...u))},"Save")])])):h("",!0),r.modalPrice?(l(),d("div",Ot,[e("section",St,[g(c,{style:{margin:"200px auto"},width:400,"bar-height":100,data:o.pricesForDisplay,min:0,max:300,"force-edges":!1,colors:["#b0b0b0","#717171"],barWidth:6,onChange:o.onChangePrice},null,8,["data","onChange"])]),e("section",Ct,[e("button",{class:"clear",onClick:t[9]||(t[9]=u=>o.clear(1))},"Clear"),e("button",{class:"save",onClick:t[10]||(t[10]=(...u)=>o.sendFilterBy&&o.sendFilterBy(...u))},"Save")])])):h("",!0),r.tapOut?(l(),d("div",{key:2,onClick:t[11]||(t[11]=(...u)=>o.closeMdal&&o.closeMdal(...u)),class:"tap-close-modal"})):h("",!0)])}var Tt=_(nt,[["render",Bt]]);const Mt={components:{},data(){return{}},methods:{openModalLogin(){console.log("hey"),this.$emit("openModalLogin")}}},Dt={class:"user-login-modal"},Rt=e("button",null,"Sign up",-1),It=e("div",{class:"break"},null,-1),Ut=e("button",null,"Host your home",-1),Pt=e("button",null,"Host an experience",-1),At=e("button",null,"Help",-1);function Lt(s,t,n,a,r,o){return l(),d("section",Dt,[e("button",{onClick:t[0]||(t[0]=(...c)=>o.openModalLogin&&o.openModalLogin(...c))},"Log in"),Rt,It,Ut,Pt,At])}var Ft=_(Mt,[["render",Lt]]);const Et={name:"login-modal",props:{loginModalOpen:Boolean},data(){return{fullname:"",username:"",password:"",loggedInUser:null,signUp:!1}},created(){},methods:{async onLogin(){if(!(!this.username&&!this.password))try{await this.$store.dispatch({type:"login",username:this.username,password:this.password}),this.toggleShow()}catch(s){throw console.log("Cannot signup",s),s}},signup(){if(!(!this.fullname&&!this.username&&!this.password))try{this.$store.dispatch({type:"signUp",userSignUp:{fullname:this.fullname,username:this.username,password:this.password}}),this.toggleShow()}catch(s){throw console.log("Cannot signup",s),s}},onToggle(){this.signUp=!this.signUp},toggleShow(){this.$emit("closeLoginModal")},loggedinUser(){this.loggedInUser=this.$store.getters.loggedInUser}},computed:{getTitle(){return this.signUp?"Sign Up":"Log In"},getButton(){return this.signUp?"Log In":"Sign Up"}}},Nt={class:"login-modal"},Ht={key:0,class:"modal-mask"},Gt={class:"modal-wrapper"},zt={class:"modal-container"},jt=e("path",{d:"m6 6 20 20"},null,-1),Vt=e("path",{d:"m26 6-20 20"},null,-1),qt=[jt,Vt],Jt={class:"modal-header"},Kt=e("div",{class:"modal-title"},[e("h1",null,"Welcome to Airbyy")],-1),Wt={key:0,class:"modal-body"},Yt=e("span",null,"Continue",-1),Qt=[Yt],Xt={key:1,class:"modal-body"},Zt=e("span",null,"Continue",-1),es=[Zt],ts={class:"modal-footer"};function ss(s,t,n,a,r,o){return l(),d("section",Nt,[g(j,{name:"modal"},{default:w(()=>[n.loginModalOpen?(l(),d("div",Ht,[e("div",Gt,[e("section",zt,[(l(),d("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",onClick:t[0]||(t[0]=(...c)=>o.toggleShow&&o.toggleShow(...c)),class:"pointer"},qt)),e("div",Jt,[e("h4",null,i(o.getTitle),1)]),Kt,r.signUp?h("",!0):(l(),d("div",Wt,[$(e("input",{type:"text",placeholder:"username","onUpdate:modelValue":t[1]||(t[1]=c=>r.username=c)},null,512),[[M,r.username]]),$(e("input",{type:"text",placeholder:"password","onUpdate:modelValue":t[2]||(t[2]=c=>r.password=c)},null,512),[[M,r.password]]),e("button",{class:"demo-tracking",onClick:t[3]||(t[3]=b((...c)=>o.onLogin&&o.onLogin(...c),["prevent"]))},Qt)])),r.signUp?(l(),d("div",Xt,[$(e("input",{type:"text",placeholder:" Fullname","onUpdate:modelValue":t[4]||(t[4]=c=>r.fullname=c)},null,512),[[M,r.fullname]]),$(e("input",{type:"text",placeholder:" Username","onUpdate:modelValue":t[5]||(t[5]=c=>r.username=c)},null,512),[[M,r.username]]),$(e("input",{type:"text",placeholder:" Password","onUpdate:modelValue":t[6]||(t[6]=c=>r.password=c)},null,512),[[M,r.password]]),e("button",{class:"demo-tracking",onClick:t[7]||(t[7]=b((...c)=>o.signup&&o.signup(...c),["prevent"]))},es)])):h("",!0),e("div",ts,[e("button",{onClick:t[8]||(t[8]=(...c)=>o.onToggle&&o.onToggle(...c))},i(o.getButton),1)])])])])):h("",!0)]),_:1})])}var Y=_(Et,[["render",ss]]),os="/assets/logol.b5b50301.ico";const rs={name:"app-header",data(){return{headerOnTop:!0,currPage:"home",shrinkedHeader:!1,isUserModalOpen:!1,showModal:!1,tapOut:!1,params:"Add Place"}},components:{searchBar:rt,roomFilter:Tt,userModalLog:Ft,loginModal:Y},created(){window.addEventListener("scroll",this.onScroll),this.$watch(()=>this.$route.params,(s,t)=>{this.setCurrPage()})},methods:{setSearchFiled(){const s=this.$route.query.destination;!s||(this.params=s)},closeModal(){this.isUserModalOpen=!1,this.showModal=!1,this.tapOut=!1},scrollToTop(){window.scrollTo(0,0)},onScroll(){this.shrinkedHeader=!0,window.scrollY>10?(this.headerOnTop=!1,this.currPage==="home"&&this.shrinkedHeader):(this.currPage==="home"&&(this.shrinkedHeader=!1,this.headerOnTop=!0),this.currPage==="dashboard"&&(this.shrinkedHeader=!0,this.headerOnTop=!0))},checkPage(){return this.currPage==="home"},exstandHeader(){this.shrinkedHeader=!this.shrinkedHeader},setCurrPage(){let{name:s}=this.$route;s==="room-app"?this.currPage="explore":s==="room-details"?this.currPage="details":s==="dashboard-page"?this.currPage="dashboard":this.currPage="home"},getLayout(){switch(this.currPage){case"explore":return"header-explore-layout fixed";case"details":return"header-detail-layout";case"home":return"header-home-layout fixed";case"dashboard":return"header-dashboard-layout fixed";default:return"header-detail-layout"}},getLayoutExtanded(){switch(this.currPage){case"explore":return"header-explore-extanded";case"details":return"header-detail-extanded";case"home":return"header-home-extanded";default:return"header-detail-extanded"}},toggleUserModal(){this.isUserModalOpen=!this.isUserModalOpen,this.tapOut=!this.tapOut},getHomeStyle(){return this.headerOnTop&&this.currPage==="home"?{backgroundColor:"#00000000"}:{backgroundColor:"white"}},onOpenloginModal(){this.showModal=!0},closeLoginModal(){this.showModal=!1},openModalSignup(){},getfilterCenter(){return this.currPage==="explore"&&this.shrinkedHeader?{justifyContent:"flex-start"}:{justifyContent:"center"}}},computed:{getStyle(){return this.headerOnTop&&this.currPage==="home"?{color:"white"}:{color:"black"}},getLogoStyle(){return this.headerOnTop&&this.currPage==="home"?{color:"white"}:{color:"#ff385c"}},showFilter(){return!!(this.currPage==="explore"&&this.shrinkedHeader)}},watch:{"$route.params":{handler(){this.setSearchFiled()},deep:!0,immediate:!0}}},ns={class:"header-contact"},ls={class:"home-btn"},as=e("h1",null,"air",-1),is=e("img",{src:os,alt:"home"},null,-1),ds=e("h1",null,"yy",-1),cs=[as,is,ds],us={class:"search-btn"},hs={key:0,class:"exploreSearch"},ms=x(" | Add dates | Add guests "),ps={key:1},gs=e("div",{class:"el-button el-button--danger el-button--large is-circle",type:"button"},[e("i",{class:"el-icon"},[e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false"},[e("g",{fill:"none"},[e("path",{d:"m13 24c6.0751322 0 11-4.9248678 11-11 0-6.07513225-4.9248678-11-11-11-6.07513225 0-11 4.92486775-11 11 0 6.0751322 4.92486775 11 11 11zm8-3 9 9"})])])])],-1),_s=e("svg",{class:"lang-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false"},[e("path",{d:"m8.002.25a7.77 7.77 0 0 1 7.748 7.776 7.75 7.75 0 0 1 -7.521 7.72l-.246.004a7.75 7.75 0 0 1 -7.73-7.513l-.003-.245a7.75 7.75 0 0 1 7.752-7.742zm1.949 8.5h-3.903c.155 2.897 1.176 5.343 1.886 5.493l.068.007c.68-.002 1.72-2.365 1.932-5.23zm4.255 0h-2.752c-.091 1.96-.53 3.783-1.188 5.076a6.257 6.257 0 0 0 3.905-4.829zm-9.661 0h-2.75a6.257 6.257 0 0 0 3.934 5.075c-.615-1.208-1.036-2.875-1.162-4.686l-.022-.39zm1.188-6.576-.115.046a6.257 6.257 0 0 0 -3.823 5.03h2.75c.085-1.83.471-3.54 1.059-4.81zm2.262-.424c-.702.002-1.784 2.512-1.947 5.5h3.904c-.156-2.903-1.178-5.343-1.892-5.494l-.065-.007zm2.28.432.023.05c.643 1.288 1.069 3.084 1.157 5.018h2.748a6.275 6.275 0 0 0 -3.929-5.068z"})],-1),fs=[_s],vs=e("svg",{class:"humb-icon",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false"},[e("g",{fill:"none","fill-rule":"nonzero"},[e("path",{d:"m2 16h28"}),e("path",{d:"m2 24h28"}),e("path",{d:"m2 8h28"})])],-1),ys=e("svg",{class:"user-icon",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false"},[e("path",{d:"m16 .7c-8.437 0-15.3 6.863-15.3 15.3s6.863 15.3 15.3 15.3 15.3-6.863 15.3-15.3-6.863-15.3-15.3-15.3zm0 28c-4.021 0-7.605-1.884-9.933-4.81a12.425 12.425 0 0 1 6.451-4.4 6.507 6.507 0 0 1 -3.018-5.49c0-3.584 2.916-6.5 6.5-6.5s6.5 2.916 6.5 6.5a6.513 6.513 0 0 1 -3.019 5.491 12.42 12.42 0 0 1 6.452 4.4c-2.328 2.925-5.912 4.809-9.933 4.809z"})],-1);function ws(s,t,n,a,r,o){const c=p("search-bar"),u=p("room-filter"),m=p("router-link"),v=p("user-modal-log"),I=p("login-modal");return l(),d("section",{class:C(["app-header",o.getLayout()]),style:k(o.getHomeStyle())},[r.currPage!=="dashboard"?(l(),d("section",{key:0,class:C(["extanded-header",o.getLayoutExtanded()]),style:k(o.getfilterCenter())},[g(c,{class:"search-bar-outline",style:k({display:r.shrinkedHeader?"none":"block"})},null,8,["style"]),o.showFilter?(l(),f(u,{key:0,class:"extanded-explore-header"})):h("",!0)],6)):h("",!0),e("section",ns,[e("section",ls,[g(m,{onClick:o.scrollToTop,to:"/"},{default:w(()=>[e("section",{class:"home-btn-link",style:k(o.getLogoStyle)},cs,4)]),_:1},8,["onClick"])]),r.shrinkedHeader?(l(),d("section",{key:0,class:"search",onClick:t[0]||(t[0]=(...y)=>o.exstandHeader&&o.exstandHeader(...y))},[e("button",us,[r.currPage==="explore"?(l(),d("h4",hs,[e("span",null,i(r.params),1),ms])):(l(),d("h4",ps,"Start your search")),gs])])):h("",!0),e("section",{class:"user-btn",style:k({color:r.headerOnTop?"black":" white"})},[g(m,{onClick:o.scrollToTop,to:"/explore"},{default:w(()=>[e("button",{class:"explore-btn-link",style:k(o.getStyle)},"Explore",4)]),_:1},8,["onClick"]),e("button",{class:"become-host-btn",style:k(o.getStyle)},"Become a Host",4),e("button",{class:"change-lang-btn",style:k(o.getStyle)},fs,4),e("button",{onClick:t[1]||(t[1]=(...y)=>o.toggleUserModal&&o.toggleUserModal(...y)),class:"user-info-btn"},[vs,ys,r.isUserModalOpen?(l(),f(v,{key:0,class:"user-info-modal",onOpenModalLogin:o.onOpenloginModal,onOpenModalSignup:o.openModalSignup},null,8,["onOpenModalLogin","onOpenModalSignup"])):h("",!0)])],4)]),(l(),f(T,{to:"body"},[g(I,{loginModalOpen:r.showModal,onClose:t[2]||(t[2]=y=>r.showModal=!1),onCloseLoginModal:o.closeLoginModal},{header:w(()=>[]),_:1},8,["loginModalOpen","onCloseLoginModal"])])),r.tapOut?(l(),d("div",{key:1,onClick:t[3]||(t[3]=(...y)=>o.closeModal&&o.closeModal(...y)),class:"tap-close-modal"})):h("",!0)],6)}var bs=_(rs,[["render",ws]]);const ks={name:"app-footer"},$s={class:"app-footer explore-layout"},xs=e("div",{class:"contact"},[e("section",{class:"right-section"},[e("p",null,"\xA9 2022 Airbyy, Inc."),e("section",{class:"btn"},[x(" \xB7 "),e("a",null," Privacy"),x(" \xB7 "),e("a",null,"Terms"),x(" \xB7 "),e("a",null,"Sitemap")])]),e("section",{class:"left-section"},[e("svg",{viewBox:"0 0 24 24",role:"img","aria-hidden":"false","aria-label":"\u05DB\u05E0\u05D9\u05E1\u05D4 \u05DC-Instagram",focusable:"false",style:{height:"18px",width:"18px",display:"block",fill:"currentcolor"}},[e("path",{d:"m23.09.91c-.61-.61-1.33-.91-2.17-.91h-17.84c-.85 0-1.57.3-2.17.91s-.91 1.33-.91 2.17v17.84c0 .85.3 1.57.91 2.17s1.33.91 2.17.91h17.84c.85 0 1.57-.3 2.17-.91s.91-1.33.91-2.17v-17.84c0-.85-.3-1.57-.91-2.17zm-14.48 7.74c.94-.91 2.08-1.37 3.4-1.37 1.33 0 2.47.46 3.41 1.37s1.41 2.01 1.41 3.3-.47 2.39-1.41 3.3-2.08 1.37-3.41 1.37c-1.32 0-2.46-.46-3.4-1.37s-1.41-2.01-1.41-3.3.47-2.39 1.41-3.3zm12.66 11.63c0 .27-.09.5-.28.68a.92.92 0 0 1 -.67.28h-16.7a.93.93 0 0 1 -.68-.28.92.92 0 0 1 -.27-.68v-10.13h2.2a6.74 6.74 0 0 0 -.31 2.05c0 2 .73 3.71 2.19 5.12s3.21 2.12 5.27 2.12a7.5 7.5 0 0 0 3.75-.97 7.29 7.29 0 0 0 2.72-2.63 6.93 6.93 0 0 0 1-3.63c0-.71-.11-1.39-.31-2.05h2.11v10.12zm0-13.95c0 .3-.11.56-.31.77a1.05 1.05 0 0 1 -.77.31h-2.72c-.3 0-.56-.11-.77-.31a1.05 1.05 0 0 1 -.31-.77v-2.58c0-.29.11-.54.31-.76s.47-.32.77-.32h2.72c.3 0 .56.11.77.32s.31.47.31.76z","fill-rule":"evenodd"})]),e("svg",{viewBox:"0 0 32 32",role:"img","aria-hidden":"false","aria-label":"\u05DB\u05E0\u05D9\u05E1\u05D4 \u05DC-Twitter",focusable:"false",style:{height:"18px",width:"18px",display:"block",fill:"currentcolor"}},[e("path",{d:"m31 6.36c-1.16.49-2.32.82-3.55.95 1.29-.76 2.22-1.87 2.72-3.38a13.05 13.05 0 0 1 -3.91 1.51c-1.23-1.28-2.75-1.94-4.51-1.94-3.41 0-6.17 2.73-6.17 6.12 0 .49.07.95.17 1.38-4.94-.23-9.51-2.6-12.66-6.38-.56.95-.86 1.97-.86 3.09 0 2.07 1.03 3.91 2.75 5.06-1-.03-1.92-.3-2.82-.76v.07c0 2.89 2.12 5.42 4.94 5.98-.63.17-1.16.23-1.62.23-.3 0-.7-.03-1.13-.13a6.07 6.07 0 0 0 5.74 4.24c-2.22 1.74-4.78 2.63-7.66 2.63-.56 0-1.06-.03-1.43-.1 2.85 1.84 6 2.76 9.41 2.76 7.29 0 12.83-4.01 15.51-9.3 1.36-2.66 2.02-5.36 2.02-8.09v-.46c-.03-.17-.03-.3-.03-.33a12.66 12.66 0 0 0 3.09-3.16","fill-rule":"evenodd"})]),e("svg",{viewBox:"0 0 32 32",role:"img","aria-hidden":"false","aria-label":"\u05DB\u05E0\u05D9\u05E1\u05D4 \u05DC-Facebook",focusable:"false",style:{height:"18px",width:"18px",display:"block",fill:"currentcolor"}},[e("path",{d:"m8 14.41v-4.17c0-.42.35-.81.77-.81h2.52v-2.08c0-4.84 2.48-7.31 7.42-7.35 1.65 0 3.22.21 4.69.64.46.14.63.42.6.88l-.56 4.06c-.04.18-.14.35-.32.53-.21.11-.42.18-.63.14-.88-.25-1.78-.35-2.8-.35-1.4 0-1.61.28-1.61 1.73v1.8h4.52c.42 0 .81.42.81.88l-.35 4.17c0 .42-.35.71-.77.71h-4.21v16c0 .42-.35.81-.77.81h-5.21c-.42 0-.8-.39-.8-.81v-16h-2.52a.78.78 0 0 1 -.78-.78","fill-rule":"evenodd"})])])],-1),Os=[xs];function Ss(s,t,n,a,r,o){return l(),d("section",$s,Os)}var Cs=_(ks,[["render",Ss]]);const Bs={name:"App",components:{appHeader:bs,appFooter:Cs}},Ts={class:"app"};function Ms(s,t,n,a,r,o){const c=p("app-header"),u=p("router-view"),m=p("app-footer");return l(),d("section",Ts,[g(c),g(u),g(m)])}var Ds=_(Bs,[["render",Ms]]);const E={saveToStorage:Rs,loadFromStorage:Is,makeId:Us,getRandomInt:Ps};function Rs(s,t){sessionStorage.setItem(s,JSON.stringify(t)||null)}function Is(s){let t=sessionStorage.getItem(s);return t?JSON.parse(t):void 0}function Us(s=8){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<s;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function Ps(s,t){return s=Math.ceil(s),t=Math.floor(t),Math.floor(Math.random()*(t-s)+s)}const As={props:{destination:Object},methods:{country(s){this.$emit("goTo",s)}},computed:{getImg(){return`src/assets/img/${this.destination.address.city}.jpg`},getKm(){switch(this.destination.address.city){case"Montreal":return"9,537";case"Porto":return"3,970";case"New York":return"10,853";case"Barcelona":return"3,584"}}}},Ls=["src"],Fs={class:"location-title"};function Es(s,t,n,a,r,o){return l(),d("section",{class:"home-page-preview",onClick:t[0]||(t[0]=c=>o.country(n.destination.address.city))},[e("img",{class:"preview-carousel",src:o.getImg,alt:""},null,8,Ls),e("div",Fs,[e("h1",null,i(n.destination.address.city),1),e("h6",null,i(o.getKm)+" kilometers away",1)])])}var Ns=_(As,[["render",Es]]),N="/assets/star.61aa61a4.png";const Hs={name:"room-preview",props:{room:Object},data(){return{}},components:{},methods:{scrollToTop(){window.scrollTo(0,0)},goToRoom(){this.$router.push(`/room/${this.room._id}`)}},computed:{getAvgRating(){return this.room.reviewScores.rating/20},imgForDisplay(){return this.room.imgUrls}}},Gs={key:0,class:"room-preview"},zs={class:"preview-img-section"},js=["src"],Vs=e("svg",{class:"preview-like-btn",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false"},[e("path",{d:"m16 28c7-4.733 14-10 14-17 0-1.792-.683-3.583-2.05-4.95-1.367-1.366-3.158-2.05-4.95-2.05-1.791 0-3.583.684-4.949 2.05l-2.051 2.051-2.05-2.051c-1.367-1.366-3.158-2.05-4.95-2.05-1.791 0-3.583.684-4.949 2.05-1.367 1.367-2.051 3.158-2.051 4.95 0 7 7 12.267 14 17z"})],-1),qs={class:"preview-details"},Js={class:"preview-reviews"},Ks={class:"preview-rating"},Ws=e("img",{src:N,alt:""},null,-1),Ys={class:"rating"},Qs={class:"num-of-reviews"},Xs={class:"price"},Zs=x(" / night ");function eo(s,t,n,a,r,o){const c=p("el-carousel-item"),u=p("el-carousel"),m=p("router-link");return n.room?(l(),d("section",Gs,[e("div",zs,[g(u,{class:"preview-carousel",autoplay:!1,trigger:"click",arrow:"hover"},{default:w(()=>[(l(!0),d(O,null,S(o.imgForDisplay,v=>(l(),f(c,{key:v},{default:w(()=>[e("img",{onClick:t[0]||(t[0]=I=>(o.scrollToTop(),o.goToRoom())),src:`https://res.cloudinary.com/canjan22/image/upload/v1648083472/AirByy/${v}`,alt:"../assets/img/hero.jpg"},null,8,js)]),_:2},1024))),128)),Vs]),_:1})]),g(m,{to:`/room/${n.room._id}`},{default:w(()=>[e("div",qs,[e("div",Js,[e("div",Ks,[Ws,e("span",Ys,i(o.getAvgRating),1),e("span",Qs,"("+i(n.room.numOfReviews)+")",1)])]),e("p",null,i(n.room.roomType)+" \xB7 "+i(n.room.address.city),1),e("p",null,i(n.room.name),1),e("p",null,[e("span",Xs,"$"+i(n.room.price),1),Zs])])]),_:1},8,["to"])])):h("",!0)}var Q=_(Hs,[["render",eo]]),to="/assets/hero.e7cd448a.jpg",so="/assets/host.66676fce.jpg";const oo={name:"home-page",data(){return{rooms:null,topRated:null,loggedInUser:null}},components:{homePagePreview:Ns,roomPreview:Q},methods:{scrollToTop(){window.scrollTo(0,0)},goTo(s){window.scrollTo(0,0),this.$router.push({path:"explore",query:{destination:s}})},topRooms(){const s=this.rooms.filter(n=>n.reviewScores.rating>80),t=E.getRandomInt(0,s.length-4);this.topRated=s.slice(t,t+4)},setDestination(){this.$store.commit({type:"saveDestination"})}},async created(){try{this.$store.commit({type:"clearFliterBy"}),await this.$store.dispatch({type:"loadRooms"}),this.rooms=this.$store.getters.rooms,this.setDestination(),await this.$store.dispatch({type:"loadUser"}),this.loggedInUser=this.$store.getters.loggedInUser,console.log("this.rooms",this.rooms)}catch(s){console.log("err",s)}},computed:{destinations(){return this.topRooms(),this.rooms.slice(1,5)}}},ro={class:"home-page"},no=e("section",{class:"main-hero"},[e("img",{src:to,alt:""})],-1),lo={class:"home-page explore-layout page-layout"},ao=e("h1",{class:"destination-title"},"Inspiration for your next trip",-1),io={key:0,class:"grid-layout destination-navbar"},co=e("h1",{class:"destination-title"},"Top rated",-1),uo={key:1,class:"grid-layout destination-navbar"},ho=e("div",{class:"become-host"},[e("div",{class:"home-host-btn"},[e("h1",null,[x(" Questions "),e("br"),x(" about"),e("br"),x(" hosting? ")]),e("button",null,"Ask a Superhost")]),e("div",{class:"img"},[e("img",{src:so,alt:""})])],-1);function mo(s,t,n,a,r,o){const c=p("home-page-preview"),u=p("room-preview");return l(),d("section",ro,[no,e("section",lo,[ao,r.rooms?(l(),d("div",io,[(l(!0),d(O,null,S(o.destinations,m=>(l(),d("div",{key:m._id},[g(c,{destination:m,onGoTo:o.goTo},null,8,["destination","onGoTo"])]))),128))])):h("",!0),co,r.rooms?(l(),d("div",uo,[(l(!0),d(O,null,S(r.topRated,m=>(l(),d("div",{key:m._id},[g(u,{room:m},null,8,["room"])]))),128))])):h("",!0),ho])])}var po=_(oo,[["render",mo]]);const go={name:"room-list",props:{rooms:{type:Array,required:!0}},components:{roomPreview:Q},created(){},data(){return{}},methods:{},computed:{}},_o={class:"room-list"},fo={class:"room-list-container"},vo={class:"grid-layout"};function yo(s,t,n,a,r,o){const c=p("room-preview");return l(),d("section",_o,[e("div",fo,[e("ul",vo,[(l(!0),d(O,null,S(n.rooms,u=>(l(),d("li",{key:u._id},[g(c,{room:u},null,8,["room"])]))),128))])])])}var wo=_(go,[["render",yo]]);const bo={name:"room-app",components:{roomList:wo},data(){return{rooms:null,searchedLocation:null,params:null}},async created(){try{await this.setCurrRooms(),this.searchedLocation=this.params.destination}catch(s){console.log("err",s)}},methods:{async setCurrRooms(){this.params=this.$route.query;try{await this.$store.dispatch({type:"filter",filterBy:JSON.parse(JSON.stringify(this.params))}),this.rooms=this.$store.getters.rooms}catch(s){throw console.log("Cannot load rooms",s),s}console.log("rooms changed after filter")}},computed:{getNumberOfRooms(){return this.$store.getters.rooms.length},getSearch(){return this.$store.getters.currSearch}},watch:{"$route.params":{handler(){console.log("hey"),this.setCurrRooms()},deep:!0,immediate:!0}}},ko={class:"room-app page-layout explore-layout header-recognaizer"},$o={class:"alerts"};function xo(s,t,n,a,r,o){const c=p("room-list");return l(),d("section",ko,[e("div",$o,[e("p",null,i(o.getNumberOfRooms)+" stays in "+i(r.searchedLocation),1)]),r.rooms&&r.rooms.length?(l(),f(c,{key:0,rooms:r.rooms},null,8,["rooms"])):h("",!0)])}var Oo=_(bo,[["render",xo]]);const So={name:"guests-modal",components:{},props:{currOrder:{type:Object}},created(){},data(){return{}},methods:{onCloseModal(){this.$emit("closeModal")},onRemove(s){this.$emit("onRemove",s)},onAdd(s){this.$emit("onAdd",s)}},computed:{}},Co={class:"guests-modal"},Bo={class:"guests-line"},To=e("div",{class:"guests-title"},[e("h1",null,"Adults"),e("h4",null,"Age 13+")],-1),Mo={class:"guests-actions"},Do={class:"guests-line"},Ro=e("div",{class:"guests-title"},[e("h1",null,"Children"),e("h4",null,"Age 2-12")],-1),Io={class:"guests-actions"},Uo={class:"guests-line"},Po=e("div",{class:"guests-title"},[e("h1",null,"Infants"),e("h4",null,"Under 2")],-1),Ao={class:"guests-actions"},Lo={class:"guests-line"},Fo=e("div",{class:"guests-title"},[e("h1",null,"Pets"),e("h4",null,"Bringing a service animal?")],-1),Eo={class:"guests-actions"},No={class:"close-modal"};function Ho(s,t,n,a,r,o){return l(),d("section",Co,[e("div",null,[e("div",Bo,[To,e("div",Mo,[e("button",{onClick:t[0]||(t[0]=b(c=>o.onRemove("adults"),["stop"]))},"-"),e("span",null,i(n.currOrder.guests.adults),1),e("button",{onClick:t[1]||(t[1]=b(c=>o.onAdd("adults"),["stop"]))},"+")])]),e("div",Do,[Ro,e("div",Io,[e("button",{onClick:t[2]||(t[2]=b(c=>o.onRemove("children"),["stop"]))},"-"),e("span",null,i(n.currOrder.guests.children),1),e("button",{onClick:t[3]||(t[3]=b(c=>o.onAdd("children"),["stop"]))},"+")])]),e("div",Uo,[Po,e("div",Ao,[e("button",{onClick:t[4]||(t[4]=b(c=>o.onRemove("infants"),["stop"]))},"-"),e("span",null,i(n.currOrder.guests.infants),1),e("button",{onClick:t[5]||(t[5]=b(c=>o.onAdd("infants"),["stop"]))},"+")])]),e("div",Lo,[Fo,e("div",Eo,[e("button",{onClick:t[6]||(t[6]=b(c=>o.onRemove("pets"),["stop"]))},"-"),e("span",null,i(n.currOrder.guests.pets),1),e("button",{onClick:t[7]||(t[7]=b(c=>o.onAdd("pets"),["stop"]))},"+")])]),e("div",No,[e("button",{class:"close-btn",onClick:t[8]||(t[8]=(...c)=>o.onCloseModal&&o.onCloseModal(...c))},"Close")])])])}var Go=_(So,[["render",Ho]]);const zo={name:"modal-checkout",components:{guestsModal:Go},props:{room:{type:Object,require:!0},preOrder:{type:Object},isReserved:Boolean},data(){return{openGuestsModal:!0,openGuestsModal:!1,currOrder:G({},this.preOrder),dates:null}},created(){},methods:{addGuests(){this.openGuestsModal=!this.openGuestsModal},onCloseModal(s){this.openGuestsModal=!1,this.currOrder.guests=s},onRemove(s){this.currOrder.guests[s]<=0||(this.currOrder.guests[s]--,console.log("this.currOrder.guests",this.currOrder.guests))},onAdd(s){this.currOrder.guests[s]+=1,console.log("this.currOrder.guests",this.currOrder.guests)},onReserve(){const{_id:s,address:t,name:n,host:a}=this.room;this.currOrder.reserve.hostId=a._id,this.currOrder.reserve.roomId=s,this.currOrder.dateOrdered=Date.now(),this.currOrder.totalAmount=this.calcTotalPriceWithServices,this.currOrder.reserve.destination=t.country,this.currOrder.reserve.roomName=n,this.$emit("onReserve",this.currOrder),this.currOrder.guests={adults:0,children:0,pets:0,infants:0}},showDate(s){if(!this.dates)return"Add dates";const t=new Date(this.dates[s]);return s===0?this.currOrder.dates.from=this.dates[s]:this.currOrder.dates.to=this.dates[s],t.toDateString()}},computed:{checkIsReserved(){return this.isReserved?"disable":""},showPrice(){return this.room.price},avgReviewScores(){return this.room.reviewScores.rating/20},guestsForDisplay(){const s=this.currOrder.guests;let t=0;for(const n in s)t+=s[n];return t===0?"Add guest":`${t} guest`},daysCounter(){const t=new Date(this.dates[0]),n=new Date(this.dates[1]);return Math.round(Math.abs((t-n)/864e5))},totalPrice(){return this.dates?this.room.price*this.daysCounter:void 0},calcTotalPriceWithServices(){if(!this.dates)return;let s=this.room.price*this.daysCounter+this.showServiceFee+this.securityDeposit;return console.log("amount",s),s},set(){let s=document.querySelector(".tracking");s.addEventListener("mousemove",t=>{let n=t.target.getBoundingClientRect(),a=t.clientX-n.left,r=t.clientY-n.top;s.style.setProperty("--x",a+"px"),s.style.setProperty("--y",r+"px")})},showCheckReserveTxt(){const{from:s,to:t}=this.currOrder.dates;return this.isReserved?"Booked":s&&t?"Reserve":"Check avalability"},showCleanningFee(){if(!this.room.cleanningfee)return 0},showServiceFee(){function s(n,a){return n=Math.ceil(n),a=Math.floor(a),Math.floor(Math.random()*(a-n)+n)}return s(0,100)},securityDeposit(){return this.room.securityDeposit?this.room.securityDeposit:0}}},jo={class:"modal-display-checkout sticky"},Vo={class:"checkout-modal"},qo={class:"checkout-container flex"},Jo={class:"tools-container flex space-between align-center"},Ko={class:"top-modal-container flex"},Wo={key:0},Yo={class:"price"},Qo=x(" / night "),Xo={class:"display-review-info flex"},Zo=e("span",null,[e("img",{src:N,alt:""})],-1),er={key:0},tr={class:"under-line"},sr={class:"display-order-container pointer"},or={class:"checkin-checkout-container flex"},rr={class:"checkin-btn"},nr={class:"modal-date-btn flex"},lr={class:"add-dates-container right-border"},ar=e("div",{class:"checkin-out"},"CHECK-IN",-1),ir={class:"add-date"},dr={class:"add-dates-container"},cr=e("div",{class:"checkin-out"},"CHECKOUT",-1),ur={class:"add-date"},hr=e("div",{class:"guests"},"GUESTS",-1),mr={key:0,class:"guests-val"},pr=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false"},[e("g",{fill:"none"},[e("path",{d:"m28 12-11.2928932 11.2928932c-.3905243.3905243-1.0236893.3905243-1.4142136 0l-11.2928932-11.2928932"})])],-1),gr={key:0,class:"reserve-modal"},_r=e("span",{class:"reserve-msg"},"You won't be charged yet",-1),fr={class:"reserve-title"},vr=e("span",{class:"reserve-title"},"Cleanning fee ",-1),yr=e("span",{class:"reserve-title"},"Service fee ",-1),wr=e("p",null,[e("span",{class:"reserve-title"},"Occupancy taxes and fees "),e("span",null,"$0")],-1),br={key:0},kr=e("span",{class:"reserve-title"},"Security deposite",-1),$r={class:"reserve-total"},xr=e("span",null,"Total",-1);function Or(s,t,n,a,r,o){const c=p("el-date-picker"),u=p("guests-modal");return l(),d("section",jo,[e("div",Vo,[e("div",qo,[e("div",Jo,[e("div",Ko,[n.room?(l(),d("div",Wo,[e("span",Yo,"$"+i(o.showPrice),1),Qo])):h("",!0),e("div",Xo,[Zo,n.room?(l(),d("span",er,i(o.avgReviewScores)+" \xB7 ",1)):h("",!0),e("span",tr,i(n.room.numOfReviews)+" reviews",1)])]),e("div",sr,[e("div",or,[e("div",rr,[e("div",nr,[e("div",lr,[ar,e("div",ir,i(o.showDate(0)),1),g(c,{modelValue:r.dates,"onUpdate:modelValue":t[0]||(t[0]=m=>r.dates=m),type:"daterange","start-placeholder":"CHECK-IN","end-placeholder":"CHECKOUT"},null,8,["modelValue"])]),e("div",dr,[cr,e("div",ur,i(o.showDate(1)),1)])]),e("div",{class:"add-guests-container flex space-between",onClick:t[1]||(t[1]=b((...m)=>o.addGuests&&o.addGuests(...m),["stop"]))},[e("div",null,[hr,o.guestsForDisplay?(l(),d("span",mr,i(o.guestsForDisplay),1)):h("",!0)]),pr]),r.openGuestsModal?(l(),f(u,{key:0,currOrder:r.currOrder,onCloseModal:o.onCloseModal,onOnRemove:o.onRemove,onOnAdd:o.onAdd},null,8,["currOrder","onCloseModal","onOnRemove","onOnAdd"])):h("",!0)])]),e("button",{class:C([o.checkIsReserved,"availability-container tracking"]),ref:"button",onClick:t[2]||(t[2]=(...m)=>o.onReserve&&o.onReserve(...m)),onMousemove:t[3]||(t[3]=(...m)=>o.set&&o.set(...m))},[e("span",null,i(o.showCheckReserveTxt),1)],34)]),r.dates?(l(),d("section",gr,[_r,e("p",null,[e("span",fr,"$"+i(n.room.price)+" x "+i(o.daysCounter)+" nights ",1),e("span",null,"$"+i(o.totalPrice),1)]),e("p",null,[vr,e("span",null,"$"+i(o.showCleanningFee),1)]),e("p",null,[yr,e("span",null,"$"+i(o.showServiceFee),1)]),wr,n.room.securityDeposit?(l(),d("p",br,[kr,e("span",null,"$"+i(o.securityDeposit),1)])):h("",!0),e("p",$r,[xr,e("span",null,"$"+i(o.calcTotalPriceWithServices),1)])])):h("",!0)])])])])}var Sr=_(zo,[["render",Or]]);const Cr={name:"review",components:{},props:{room:{type:Object,require:!0}},data(){return{avatar:"",showMore:{idx:!1}}},created(){},computed:{reviewScore(){const{accuracy:s,cleanliness:t,checkin:n,communication:a,location:r,value:o}=this.room.reviewScores;return{accuracy:s,cleanliness:t,checkin:n,communication:a,location:r,value:o}},avgReviewScores(){return this.room.reviewScores.rating/20}},methods:{adjustTxt(s){return s.length<=170?s:s.substring(0,170)+"..."},showUnshow(s){this.showMore[s]=!this.showMore[s]},isLongReview(s){return s>=170},getReviewDate(s){const t=new Date(s),n=t.toDateString().substring(11,15);return t.toDateString().substring(4,7)+" "+n}}},Br={class:"room-review"},Tr={class:"review-score"},Mr={class:"room-reviews-header"},Dr={class:"container flex flex-start"},Rr=e("span",{class:"star-review"},[e("img",{src:N,alt:""})],-1),Ir={key:0,class:"reviews"},Ur={class:"score-list-container"},Pr={key:0},Ar={class:"flex space-between"},Lr={class:"progress-container"},Fr={class:"flex"},Er={class:"room-review-list"},Nr={class:"review-list-container clean-list"},Hr={class:"review-header"},Gr={class:"avatar-container"},zr={class:"review-by-container flex"},jr={class:"container"},Vr={class:"name"},qr={class:"date"},Jr=["onClick"],Kr=e("p",null,"Show more",-1),Wr=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor","stroke-width":"5.33333",overflow:"visible"}},[e("g",{fill:"none"},[e("path",{d:"m12 4 11.2928932 11.2928932c.3905243.3905243.3905243 1.0236893 0 1.4142136l-11.2928932 11.2928932"})])],-1),Yr=[Kr,Wr];function Qr(s,t,n,a,r,o){const c=p("el-progress"),u=p("el-avatar");return l(),d("section",Br,[e("section",Tr,[e("div",Mr,[e("div",Dr,[Rr,n.room.reviewScores?(l(),d("span",Ir,i(o.avgReviewScores)+" \xB7 "+i(n.room.numOfReviews)+" Reviews",1)):h("",!0)]),e("div",Ur,[n.room.reviewScores?(l(),d("ul",Pr,[(l(!0),d(O,null,S(o.reviewScore,(m,v)=>(l(),d("li",{class:"clean-list",key:v},[e("div",Ar,[e("div",Lr,i(v),1),e("div",Fr,[g(c,{class:"progress-bar",percentage:m*10},{default:w(()=>[e("span",null,i(m/2),1)]),_:2},1032,["percentage"])])])]))),128))])):h("",!0)])])]),e("section",Er,[e("ul",Nr,[(l(!0),d(O,null,S(n.room.reviews,(m,v)=>(l(),d("li",{class:"review-preview-container",key:v},[e("section",Hr,[e("div",null,[e("div",Gr,[e("div",zr,[g(u,{size:56,src:`https://res.cloudinary.com/canjan22/image/upload/v1648736344/avatars/${v}.jpg`},null,8,["src"]),e("div",jr,[e("h3",Vr,i(m.by.fullname),1),e("h3",qr,i(o.getReviewDate(m.at)),1)])])])]),e("p",null,i(r.showMore[v]?m.txt:o.adjustTxt(m.txt)),1),o.isLongReview(m.txt.length)?(l(),d("button",{key:0,onClick:I=>o.showUnshow(v),class:"show-more-btn"},Yr,8,Jr)):h("",!0)])]))),128))])])])}var Xr=_(Cr,[["render",Qr]]);const Zr={name:"reserve-modal",props:{show:Boolean,loggedInUser:Object,room:Object},data(){return{booked:null,loggedInUser:null}},created(){this.booked=this.$store.getters.booked,this.loggedInUser=this.$store.getters.loggedInUser},methods:{showDates(s){if(!this.booked)return;const t=Object.values(this.booked.dates);return new Date(t[s]).toDateString()}},computed:{dateForShow(){const{dateOrdered:s}=this.booked;return new Date(s).toLocaleString()}}},en={key:0,class:"modal-mask"},tn={class:"modal-wrapper"},sn={class:"modal-container modal-reserve"},on=e("div",{class:"modal-title"},[e("h1",null,"Order details")],-1),rn={class:"modal-body"},nn={class:"trip-side"},ln=e("h3",null,"Your trip",-1),an=x(" Status "),dn={class:"trip-info"},cn={class:"line"},un=e("h4",null,"Dates",-1),hn={class:"line"},mn=e("h4",null,"Guests",-1),pn={key:0},gn={key:1},_n={key:2},fn={key:3},vn={class:"order-side"},yn={class:"order-total"},wn=e("h4",null,"Total",-1),bn={class:"modals-footer"};function kn(s,t,n,a,r,o){return l(),f(j,{name:"modal"},{default:w(()=>[n.show?(l(),d("div",en,[e("div",tn,[e("div",sn,[on,e("div",rn,[e("div",nn,[ln,e("h4",null,i(n.room.address.country),1),e("h4",null,i(n.room.address.city),1),e("h4",null,[an,e("span",null,i(r.booked.status),1)]),e("div",dn,[e("div",cn,[un,e("span",null,"Booked At "+i(o.dateForShow),1),e("p",null,i(o.showDates(0))+" - "+i(o.showDates(1)),1)]),e("div",hn,[mn,r.booked.guests.adults?(l(),d("span",pn,"Adults "+i(r.booked.guests.adults),1)):h("",!0),r.booked.guests.children?(l(),d("span",gn," Children "+i(r.booked.guests.children),1)):h("",!0),r.booked.guests.infants?(l(),d("span",_n," infants "+i(r.booked.guests.infants),1)):h("",!0),r.booked.guests.pets?(l(),d("span",fn," Pets "+i(r.booked.guests.pets),1)):h("",!0)])])]),e("div",vn,[e("span",null,i(r.booked.reserve.roomName),1),e("div",yn,[wn,e("span",null,"$"+i(r.booked.totalAmount),1)])])]),e("h2",null,"Thank you "+i(r.loggedInUser.fullname),1),e("div",bn,[e("button",{class:"modal-default-button demo-tracking",onClick:t[0]||(t[0]=c=>s.$emit("close"))}," Ok ")])])])])):h("",!0)]),_:1})}var $n=_(Zr,[["render",kn]]);const xn={name:"ask-login",props:{showAskLoginModal:Boolean},data(){return{loginModalOpen:!1}},created(){console.log("hey!")},components:{loginModal:Y},methods:{onLogin(){this.loginModalOpen=!0},closeLoginModal(){this.loginModalOpen=!1,this.$emit("close")}}},On={class:"ask-login"},Sn={key:0,class:"modal-mask"},Cn={class:"modal-wrapper"},Bn={class:"modal-container"},Tn=e("path",{d:"m6 6 20 20"},null,-1),Mn=e("path",{d:"m26 6-20 20"},null,-1),Dn=[Tn,Mn],Rn=e("div",{class:"modal-header"},[e("h1",{name:"header"},"Please Login first to continue")],-1),In={class:"modal-body"},Un=e("span",null," Log in",-1),Pn=[Un],An={class:"modal-footer"},Ln={name:"footer"};function Fn(s,t,n,a,r,o){const c=p("login-modal");return l(),d("section",On,[g(j,{name:"modal"},{default:w(()=>[n.showAskLoginModal?(l(),d("div",Sn,[e("div",Cn,[e("div",Bn,[(l(),d("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",onClick:t[0]||(t[0]=(...u)=>o.closeLoginModal&&o.closeLoginModal(...u))},Dn)),Rn,e("div",In,[e("button",{class:"demo-tracking",id:"show-modal",onClick:t[1]||(t[1]=(...u)=>o.onLogin&&o.onLogin(...u))},Pn)]),e("div",An,[e("div",Ln,[e("button",{class:"modal-default-button",onClick:t[2]||(t[2]=u=>s.$emit("close"))}," Stay guest ")])])])])])):h("",!0)]),_:1}),(l(),f(T,{to:"body"},[g(c,{loginModalOpen:r.loginModalOpen,onCloseLoginModal:o.closeLoginModal},{header:w(()=>[]),_:1},8,["loginModalOpen","onCloseLoginModal"])]))])}var En=_(xn,[["render",Fn]]);const Nn={name:"room-detail",data(){return{room:null,preOrder:{},isOrderSuccesses:!1,showModal:!1,loggedInUser:null,showAskLoginModal:!1,avatar:null,isReserved:!1}},components:{modalCheckout:Sr,roomReview:Xr,reserveModal:$n,askLogin:En},async created(){const{roomId:s}=this.$route.params;this.preOrder=this.$store.getters.getPreOrder,this.$store.dispatch({type:"loadUser"});try{this.loggedInUser=this.$store.getters.loggedInUser,console.log("this.loggedInUser",this.loggedInUser),this.room=await this.$store.dispatch({type:"getRoom",id:s})}catch(t){throw console.log("err",t),t}},methods:{async sendReserve(s){if(!this.loggedInUser){this.showAskLoginModal=!0;return}try{await this.$store.dispatch({type:"addOrder",order:s}),this.showModal=!0,this.isReserved=!0,this.changeStatusOrder()}catch(t){throw console.log("Cannot send order"),t}},replaceByDefault(s){s.target.src="src/assets/icons/other.svg"},replaceImgByDefault(s){s.target.src="src/assets/img/room.jpeg"},changeStatusOrder(){this.isOrderSuccesses=!this.isOrderSuccesses},onClose(){this.showModal=!1,this.changeStatusOrder()}},computed:{showGreatloc(){return this.room.reviewScores.location},avgReviewScores(){return this.room.reviewScores.rating/20},amenitiesForDisplay(){return this.room.amenities.slice(0,8)},imgForDisplay(){return this.room.imgUrls},svgForDisplay(s){s=s.replace(/\s/g,"")},getLoggedInUser(){return this.$store.getters.loggedInUser}},watch:{getLoggedInUser:{handler(s,t){this.loggedInUser=this.getLoggedInUser},flush:"post"}}},Hn={key:0,class:"room-detail detail-layout page-layout details-header-recognaizer"},Gn={class:"room-short-detail flex align-center space-between"},zn={class:"short-detail-container flex"},jn={class:"star-review"},Vn=e("img",{src:N,alt:""},null,-1),qn={class:"review-scores"},Jn={class:"under-line"},Kn=e("p",null,"\xB7",-1),Wn={class:"address"},Yn={class:"under-line"},Qn={class:"under-line"},Xn=e("div",{class:"options-btn flex"},[e("button",{class:"flex"},[e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"16px",width:"16px",stroke:"currentcolor","stroke-width":"2",overflow:"visible"}},[e("g",{fill:"none"},[e("path",{d:"M27 18v9a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-9"}),e("path",{d:"M16 3v23V3z"}),e("path",{d:"M6 13l9.293-9.293a1 1 0 0 1 1.414 0L26 13"})])]),e("p",{class:"under-line"},"Share")]),e("button",{class:"flex"},[e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"16px",width:"16px",stroke:"currentcolor","stroke-width":"2",overflow:"visible"}},[e("path",{d:"m16 28c7-4.733 14-10 14-17 0-1.792-.683-3.583-2.05-4.95-1.367-1.366-3.158-2.05-4.95-2.05-1.791 0-3.583.684-4.949 2.05l-2.051 2.051-2.05-2.051c-1.367-1.366-3.158-2.05-4.95-2.05-1.791 0-3.583.684-4.949 2.05-1.367 1.367-2.051 3.158-2.051 4.95 0 7 7 12.267 14 17z"})]),e("p",{class:"under-line"},"Save")])],-1),Zn={class:"imgs-container grid"},el=["src"],tl={class:"room-detail-info flex"},sl={class:"info-side"},ol={class:"room-present-info"},rl={class:"info"},nl={class:"short-info-container"},ll={class:"info-line"},al=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",height:"24px",width:"24px",fill:"currentcolor"}},[e("path",{d:"m24.3334 1.66675c1.0543745 0 1.9181663.81587127 1.9945143 1.85073677l.0054857.14926323-.00065 24.666 3.00065.00075v2h-26.66665v-2l3-.00075v-24.666c0-1.05436681.81587301-1.91816558 1.850737-1.99451429l.149263-.00548571zm-4.00065 2h-12.666l-.00075 24.66625 12.66675-.00025zm4.00065 0h-2.00065v24.666l2.00025.00025zm-7.0001 11.00002c.7363778 0 1.33333.5969522 1.33333 1.33333s-.5969522 1.33333-1.33333 1.33333-1.33333-.5969522-1.33333-1.33333.5969522-1.33333 1.33333-1.33333z"})],-1),il={class:"container"},dl={class:"title"},cl={class:"subtitle"},ul={key:0},hl={class:"info-line"},ml=e("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",height:"24px",width:"24px",fill:"currentcolor"}},[e("path",{d:"M16 0c6.627 0 12 5.373 12 12 0 6.337-3.814 12.751-11.346 19.257L16 31.82l-1.076-.932C7.671 24.509 4 18.218 4 12 4 5.423 9.397 0 16 0zm0 2C10.504 2 6 6.525 6 12c0 5.44 3.249 11.118 9.831 17.02l.169.149.576-.518c6.178-5.65 9.293-11.092 9.42-16.318L26 12c0-5.523-4.477-10-10-10zm0 5a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"})],-1),pl={class:"container"},gl={class:"title"},_l={class:"subtitle"},fl={class:"info-line"},vl=["src"],yl={class:"container"},wl={class:"title"},bl=e("p",{class:"subtitle"}," Guests often search for this popular amenity ",-1),kl={class:"descripation-container"},$l={class:"discription"},xl={class:"offer-info-container"},Ol=e("h2",null,"What this place to offers",-1),Sl={class:"clean-list flex"},Cl=["src"],Bl={class:"max-height"},Tl=e("h3",null,"custom header",-1),Ml=e("h3",null,"custom header",-1);function Dl(s,t,n,a,r,o){const c=p("el-avatar"),u=p("modal-checkout"),m=p("room-review"),v=p("reserve-modal"),I=p("ask-login");return r.room?(l(),d("section",Hn,[e("h1",null,i(r.room.name),1),e("section",Gn,[e("div",zn,[e("div",jn,[Vn,e("h4",qn,i(o.avgReviewScores)+" \xB7",1)]),e("h4",Jn,i(r.room.numOfReviews)+" Reviews",1),Kn,e("div",Wn,[e("h4",Yn,i(r.room.address.city),1),e("h4",Qn,i(r.room.address.street),1)])]),Xn]),e("section",Zn,[(l(!0),d(O,null,S(o.imgForDisplay,y=>(l(),d("img",{key:y,src:`https://res.cloudinary.com/canjan22/image/upload/v1648083472/AirByy/${y}`,onError:t[0]||(t[0]=(...H)=>o.replaceImgByDefault&&o.replaceImgByDefault(...H)),alt:"room img"},null,40,el))),128))]),e("article",tl,[e("div",sl,[e("div",ol,[e("div",rl,[e("h2",null,i(r.room.roomType)+" rental unit hosted by "+i(r.room.host.fullname),1),e("h5",null,i(r.room.capacity)+" Guests \xB7 "+i(r.room.beds)+" Beds \xB7 "+i(r.room.bedrooms)+" Bedrooms \xB7 "+i(r.room.bathrooms)+" Bathrooms ",1)]),e("div",null,[g(c,{size:56,src:"https://res.cloudinary.com/canjan22/image/upload/v1648736344/avatars/19.jpg"},null,8,["src"])])]),e("div",nl,[e("div",ll,[al,e("div",il,[e("p",dl,i(r.room.propertyType),1),e("p",cl,i(r.room.roomType),1)])]),`${o.showGreatloc>8}`?(l(),d("form",ul,[e("div",hl,[ml,e("div",pl,[e("p",gl,"Great location "+i(o.showGreatloc),1),e("p",_l," 90% of recent guests gave the location a "+i(o.showGreatloc)+" scores ",1)])])])):h("",!0),e("div",fl,[e("img",{src:`src/assets/icons/${r.room.amenities[0].replace(/\s/g,"")}.svg`,alt:""},null,8,vl),e("div",yl,[e("p",wl,i(r.room.amenities[0]),1),bl])])]),e("div",kl,[e("p",$l,i(r.room.summary),1)]),e("div",xl,[Ol,e("ul",Sl,[(l(!0),d(O,null,S(o.amenitiesForDisplay,(y,H)=>(l(),d("li",{key:H},[e("img",{src:`src/assets/icons/${y.replace(/\s/g,"")}.svg`,onError:t[1]||(t[1]=(...ee)=>o.replaceByDefault&&o.replaceByDefault(...ee)),alt:"Icon Missed"},null,40,Cl),e("p",null,i(y),1)]))),128))])])]),e("div",Bl,[r.room?(l(),f(u,{key:0,preOrder:r.preOrder,onOnReserve:o.sendReserve,room:r.room,isReserved:r.isReserved},null,8,["preOrder","onOnReserve","room","isReserved"])):h("",!0)])]),r.room?(l(),f(m,{key:0,room:r.room},null,8,["room"])):h("",!0),(l(),f(T,{to:"body"},[r.loggedInUser&&r.isOrderSuccesses?(l(),f(v,{key:0,show:r.showModal,onClose:o.onClose,loggedInUser:r.loggedInUser,room:r.room},{header:w(()=>[Tl]),_:1},8,["show","onClose","loggedInUser","room"])):h("",!0)])),(l(),f(T,{to:"body"},[g(I,{showAskLoginModal:r.showAskLoginModal,onClose:t[2]||(t[2]=y=>r.showAskLoginModal=!1),onToggleShow:t[3]||(t[3]=y=>s.show=!1)},{header:w(()=>[Ml]),_:1},8,["showAskLoginModal"])]))])):h("",!0)}var Rl=_(Nn,[["render",Dl]]);const Il={name:"room-edit",data(){return{}},computed:{},methods:{}},Ul={class:"room-edit page-layout"};function Pl(s,t,n,a,r,o){return l(),d("section",Ul,"EDIT")}var Al=_(Il,[["render",Pl]]);le.register(...ae);const Ll={name:"dashboard-chart",props:{labels:Array,chartData:Array},computed:{testData(){return{labels:this.labels,datasets:[{data:this.chartData,backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}},components:{DoughnutChart:ie}};function Fl(s,t,n,a,r,o){const c=p("DoughnutChart");return l(),f(c,{chartData:o.testData},null,8,["chartData"])}var El=_(Ll,[["render",Fl]]);const Nl={name:"dashboard-page",components:{},data(){return{orders:[],hostLoggin:null}},async created(){try{await this.$store.dispatch({type:"loadOrders"}),this.orders=this.$store.getters.orders,console.log("this.orders",this.orders)}catch(s){throw console.log("Cannot load order"),s}},methods:{guestsAmount(s){let t=0;for(const n in s)t+=s[n];return t===0?"":t===1?`guest ${t}`:`guests ${t}`},dateForDisplay(s){return new Date(s).toDateString()},dateOrderedForDisplay(s){return new Date(s).toLocaleString()}},computed:{totalRevenuse(){let s=0;return this.orders.forEach(t=>{!t.totalAmount||(s+=t.totalAmount)}),s.toLocaleString("en-US",{style:"currency",currency:"USD"})},totalOrders(){return this.orders.length},totalGuests(){let s=0;return this.orders.forEach(t=>{!t.guests||Object.values(t.guests).forEach(n=>s+=n)}),s}}},Hl={class:"dashboard explore-layout page-layout details-header-recognaizer"},Gl=e("h1",null,"Hello dashboard",-1),zl={class:"main-layout-dashboard"},jl={class:"dashboard-chart"},Vl=de('<div class="dashboard-line dashboard-title"><div class="dashboard-name">Place</div><div class="dashboard-order-date">Booking time</div><div class="dashboard-date">Dates</div><div class="dashboard-amount">Amount</div><div class="dashboard-user">Name</div><div class="dashboard-status">Status</div></div>',1),ql={key:0},Jl={class:"dashboard-name"},Kl={class:"dashboard-order-date"},Wl={class:"dashboard-date"},Yl={class:"dashboard-amount"},Ql={class:"dashboard-user"},Xl={class:"dashboard-status"},Zl={class:"dashboard-modals-area"},ea=e("div",null,[e("span",null,"Total Rate"),e("span",null,"Avg"),e("span",null,"Reviews")],-1),ta=e("span",null,"Total Revenuse",-1),sa=e("span",null,"Orders",-1),oa=e("span",null,"Guests",-1),ra={key:0};function na(s,t,n,a,r,o){return l(),d("section",Hl,[Gl,e("div",zl,[e("div",jl,[Vl,r.orders?(l(),d("ul",ql,[(l(!0),d(O,null,S(r.orders,c=>(l(),d("li",{class:"dashboard-line",key:c._id},[e("div",Jl,[e("span",null,i(c.reserve.roomName),1)]),e("div",Kl,[e("span",null,i(o.dateOrderedForDisplay(c.dateOrdered)),1)]),e("div",Wl,[e("span",null,i(o.dateForDisplay(c.dates.from)),1),e("span",null,i(o.dateForDisplay(c.dates.to)),1)]),e("div",Yl,i(o.guestsAmount(c.guests)),1),e("div",Ql,i(o.guestsAmount(c.guests)),1),e("div",Xl,[e("button",{class:"dashboard-approve",onClick:t[0]||(t[0]=(...u)=>s.onReponse&&s.onReponse(...u))}," Approve "),e("button",{class:"dashboard-decline",onClick:t[1]||(t[1]=(...u)=>s.onReponse&&s.onReponse(...u))}," Decline ")])]))),128))])):h("",!0)]),e("div",Zl,[ea,e("div",null,[ta,e("span",null,i(o.totalRevenuse),1)]),e("div",null,[sa,e("span",null,"Orders "+i(o.totalOrders),1)]),e("div",null,[oa,r.orders?(l(),d("div",ra,"Guests "+i(o.totalGuests),1)):h("",!0)])])])])}var la=_(Nl,[["render",na]]);const aa=ce({history:ue(),routes:[{path:"/",name:"HomePage",component:po},{path:"/test",component:El},{path:"/dashboard",name:"dashboard-page",component:la},{path:"/explore",name:"room-app",component:Oo},{path:"/room/:roomId",name:"room-details",component:Rl},{path:"/room/edit/:roomId?",name:"room-edit",component:Al}]}),ia="/api/";var da=W.create({withCredentials:!0});const B={get(s,t){return A(s,"GET",t)},post(s,t){return console.log("data",t),A(s,"POST",t)},put(s,t){return A(s,"PUT",t)},delete(s,t){return A(s,"DELETE",t)}};async function A(s,t="GET",n=null){console.log(s);try{return(await da({url:`${ia}${s}`,method:t,data:n,params:t==="GET"?n:null})).data}catch(a){throw console.log(`Had Issues ${t}ing to the backend, endpoint: ${s}, with data: ${n}`),console.dir(a),a.response&&a.response.status===401&&window.location.assign("/login"),a}}const X={query:D,get:ca,post:ua,put:ma,remove:pa,postMany:ha,save:U};function D(s){var t=JSON.parse(localStorage.getItem(s))||[];return Promise.resolve(t)}function ca(s,t){return D(s).then(n=>n.find(a=>a._id===t))}function ua(s,t){return t._id=ga(),D(s).then(n=>(n.push(t),U(s,n),t))}function ha(s,t){return D(s).then(n=>(n.push(...t),U(s,n),n))}function ma(s,t){return D(s).then(n=>{const a=n.findIndex(r=>r._id===t._id);return n.splice(a,1,t),U(s,n),t})}function pa(s,t){return D(s).then(n=>{const a=n.findIndex(r=>r._id===t);if(a===-1)return Promise.reject(`Unknown Entity ${s} with Id: ${t}`);n.splice(a,1),U(s,n)})}function U(s,t){localStorage.setItem(s,JSON.stringify(t))}function ga(s=8){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<s;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}const z="room/",_a="room_db",K={query:fa,getById:va,save:ya,getEmptyRoom:wa};async function fa(s){try{return B.get(z,s)}catch(t){console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data:`,data),console.dir(t)}return await B.get(z,s)}async function va(s){try{return await B.get(`${z}/${s}`)}catch{console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data:`,data),console.dir(err)}}async function ya(s){return await X._save(_a,s)}function wa(){}var ba={state:{rooms:null,destination:null,filterBy:{amenities:[],destination:"",adults:0,children:0,infants:0,pets:0,roomType:{entirePlace:!1,privateRoom:!1,hotelRoom:!1,sharedRoom:!1},price:{from:null,to:null}},homeRooms:null},getters:{rooms(s){return JSON.parse(JSON.stringify(s.rooms))},destinations(s){return JSON.parse(JSON.stringify(s.destination))},currSearch({filterBy:s}){return s.destination},filterBy(s){return console.log("state.filterBy",s.filterBy),JSON.parse(JSON.stringify(s.filterBy))},filterByRoomType(s){const{roomType:t}=s.filterBy;return JSON.parse(JSON.stringify(t))},filterByPrice(s){return G({},s.filterBy.price)},roomsPrices(s){let t=[];return s.rooms.forEach(n=>{t.push(n.price)}),t}},mutations:{setRooms(s,{rooms:t}){s.rooms=t,console.log("state.rooms",s.rooms)},removeRoom(s,{id:t}){const n=s.rooms.findIndex(a=>a._id===t);s.rooms.splice(n,1)},saveRoom(s,{savedRoom:t}){const n=s.rooms.findIndex(a=>a._id===t._id);n!==-1?s.rooms.splice(n,1,t):s.rooms.push(t)},setFilter(s,{filterBy:t}){const{destination:n,adults:a,children:r,infants:o,pets:c}=t;s.filterBy.destination=n,s.filterBy.adults=a,s.filterBy.children=r,s.filterBy.infants=o,s.filterBy.pets=c},setFilterByRoomType(s,{filterBy:t}){const{roomType:n,price:a}=t;s.filterBy.roomType=n,s.filterBy.price=a},setAmenities(s,{amenities:t}){console.log("amenities",t),s.filterBy.amenities=Object.values(t)},saveDestination(s){const t=s.rooms.filter(n=>n.address.country);s.destination=t},clearFliterBy(s){s.filterBy={destination:"",adults:0,children:0,infants:0,pets:0,roomType:{entirePlace:!1,privateRoom:!1,hotelRoom:!1,sharedRoom:!1},price:{min:null,max:null},amenities:[]}}},actions:{async loadRooms({commit:s,state:t}){console.log("state.filterBy",t.filterBy);try{const n=await K.query(t.filterBy);console.log("rooms in action (load rooms)",n),s({type:"setRooms",rooms:n})}catch(n){console.log("err",n)}},async getRoom({commit:s,state:t},{id:n}){try{return await K.getById(n)}catch(a){console.log("err",a)}},async filter({commit:s,dispatch:t},{filterBy:n}){try{s({type:"setFilter",filterBy:n}),await t({type:"loadRooms"})}catch(a){throw console.log("Cannot FilterBy",a),a}}}};const ka="order",Z="order/",L={query:$a,getById:xa,save:Oa,getEmptyOrder:Sa};async function $a(s){return await B.get(Z,s)}async function xa(s){return await X.get(ka,s)}async function Oa(s){return await B.post(Z,s)}function Sa(){return{guests:{adults:1,children:0,pets:0,infants:0},dates:{from:null,to:null},reserve:{destination:"",roomName:"",roomId:""},status:"pending"}}var Ca={state:{preOrder:L.getEmptyOrder(),orders:[],booked:null},getters:{orders(s){return console.log("state.orders",s.orders),JSON.parse(JSON.stringify(s.orders))},getPreOrder({preOrder:s}){return JSON.parse(JSON.stringify(s))},booked({booked:s}){return s}},mutations:{setOrders(s,{orders:t}){s.orders=t},saveOrder(s,{savedOrder:t}){s.booked=t},saveDate(s,{selectedDate:t}){s.preOrder.dates=t}},actions:{async loadOrders({commit:s,state:t}){try{const n=await L.query();s({type:"setOrders",orders:n})}catch(n){throw console.log("Cannot load orders",n),n}},async addOrder({commit:s},{order:t}){console.log("order",t);try{const n=await L.save(t);return s({type:"saveOrder",savedOrder:n}),"booked"}catch(n){throw console.log("Cannot create order",n),n}},getPreOrder(){return L.getEmptyOrder()}}};const Ba="loggedin",Ta="auth/",F={login:Ma,signup:Da,logout:Ra,getLoggedinUser:Ia,getUsersAvatar:Ua};async function Ma(s,t){const n={username:s,password:t};try{const a=await B.post("auth/login",n);return E.saveToStorage("loggedin",a),a}catch(a){console.log("cent login",a)}}async function Da(s){console.log("userSignUp",s);try{s.id=E.makeId;const t=await B.post("auth/signup",s);return console.log("sucsess signup",t),t}catch(t){console.log("err",t)}}async function Ra(){try{return E.saveToStorage("loggedinUser",""),await B.post(`${Ta}/logout`)}catch(s){throw console.log("Cannot logout",s),s}}function Ia(){let s=JSON.parse(sessionStorage.getItem(Ba)||"null");return console.log("loggedInUser",s),s}async function Ua(){try{const s=await W.get("https://randomuser.me/api/");return console.log("res.data",s.data.results[0].picture.medium),s.data.results[0].picture.medium}catch(s){throw console.log("Cannot get avatar",s),s}}var Pa={state:{loggedInUser:null,avatar:null},getters:{loggedInUser(s){return console.log("state.loggedInUser",s.loggedInUser),s.loggedInUser},avatar(s){return s.avatar}},mutations:{setLoggedInUser(s,{loggedInUser:t}){s.loggedInUser=t,console.log("loggedInUser after mutation",t)},setAvatars(s,{avatar:t}){s.avatar=t}},actions:{loadUser({commit:s}){try{const t=F.getLoggedinUser();console.log("loggedInUser",t),s({type:"setLoggedInUser",loggedInUser:t})}catch(t){throw console.log("Cannot load user"),t}},async login({commit:s},{username:t,password:n}){try{const a=await F.login(t,n);s({type:"setLoggedInUser",loggedInUser:a})}catch(a){throw console.log("Cannot login ",a),a}},async signUp({commit:s},{userSignUp:t}){console.log("userSignUp",t);try{const n=await F.signup(t)}catch(n){throw console.log("Cannot signUp",n),n}},async loadAvatars({commit:s}){try{const t=await F.getUsersAvatar();return s({type:"setAvatars",avatar:t}),t}catch(t){throw console.log("Cannot load avatar",t),t}}}};const Aa=he({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{roomStore:ba,orderStore:Ca,userStore:Pa}});const R=me(Ds);R.config.productionTip=!1;R.component(J.name,J);R.use(pe);R.use(aa);R.use(Aa);R.mount("#app");
